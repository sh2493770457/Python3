# Request2Python Burp æ‰©å±•æ’ä»¶

![Burp Extension](https://img.shields.io/badge/Burp%20Suite-v2023.12+-orange)
![Python](https://img.shields.io/badge/Python-3.6%2B-blue)

## ğŸ“– æ¦‚è¿°

Request2Python æ˜¯ä¸€æ¬¾ Burp Suite æ‰©å±•æ’ä»¶ï¼Œå¯ä»¥å°†é€‰ä¸­çš„ HTTP è¯·æ±‚è‡ªåŠ¨è½¬æ¢ä¸ºå¯æ‰§è¡Œçš„ Python è„šæœ¬ã€‚ç‰¹åˆ«é€‚ç”¨äºï¼š

- **å®‰å…¨æµ‹è¯•äººå‘˜**ï¼šå¿«é€Ÿç”ŸæˆéªŒè¯æ¼æ´çš„ PoC ä»£ç 
- **å¼€å‘äººå‘˜**ï¼šå¿«é€Ÿåˆ›å»º API è°ƒè¯•è„šæœ¬
- **è‡ªåŠ¨åŒ–æµ‹è¯•**ï¼šç”ŸæˆåŸºç¡€æµ‹è¯•ç”¨ä¾‹æ¡†æ¶

## âœ¨ æ ¸å¿ƒåŠŸèƒ½

### è¯·æ±‚è½¬æ¢æ”¯æŒ
| è¯·æ±‚ç±»å‹  | æ”¯æŒç‰¹æ€§                       |
| --------- | ------------------------------ |
| GET è¯·æ±‚  | âœ… URL å‚æ•°è‡ªåŠ¨è§£æ             |
| POST è¯·æ±‚ | âœ… è¡¨å•æ•°æ® / JSON / äºŒè¿›åˆ¶æ•°æ® |
| è¯·æ±‚å¤´    | âœ… è‡ªåŠ¨è¿‡æ»¤å†—ä½™å¤´               |
| HTTPS     | âœ… è‡ªåŠ¨å¤„ç†è¯ä¹¦éªŒè¯             |

### é«˜çº§ç‰¹æ€§
- **æ™ºèƒ½æ•°æ®å¤„ç†**
  - è‡ªåŠ¨è¯†åˆ« `application/json` å†…å®¹ç±»å‹
  - æ­£ç¡®å¤„ç† `multipart/form-data` ä»¥å¤–çš„äºŒè¿›åˆ¶æ•°æ®
  - URL å‚æ•°è‡ªåŠ¨ç¼–ç å¤„ç†

- **ä»£ç ç”Ÿæˆä¼˜åŒ–**
  - è‡ªåŠ¨ç”Ÿæˆ `requests` åº“æ ‡å‡†è°ƒç”¨
  - æ”¯æŒ Base64 ç¼–ç çš„äºŒè¿›åˆ¶æ•°æ®ä¼ è¾“
  - ä¸­æ–‡æ³¨é‡Šå’ŒçŠ¶æ€è¾“å‡º

## ğŸ› ï¸ å®‰è£…æŒ‡å—

### ç¯å¢ƒè¦æ±‚
- Burp Suite Professional/Community 2023.12+
- Jython 2.7.3 (åµŒå…¥åœ¨ Burp ä¸­)
- Python 3.6+ (æ‰§è¡Œç”Ÿæˆè„šæœ¬)

### å®‰è£…æ­¥éª¤
1. ä¸‹è½½ `Request2Python.py` æ–‡ä»¶
2. æ‰“å¼€ Burp Suite â†’ Extender â†’ Extensions
3. ç‚¹å‡» "Add" â†’ é€‰æ‹© "Python" ç±»å‹
4. é€‰æ‹©ä¸‹è½½çš„ Python æ–‡ä»¶
5. ç¡®è®¤æ§åˆ¶å°è¾“å‡ºåŠ è½½æˆåŠŸä¿¡æ¯

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### åŸºç¡€ä½¿ç”¨
1. åœ¨ Proxy/Repeater æ¨¡å—é€‰ä¸­ç›®æ ‡è¯·æ±‚
2. å³é”®ç‚¹å‡» â†’ é€‰æ‹© "Export to Python"
3. é€‰æ‹©ä¿å­˜è·¯å¾„ (é»˜è®¤: request.py)
4. è¿è¡Œç”Ÿæˆçš„è„šæœ¬ï¼š`python request.py`

### è½¬æ¢ç¤ºä¾‹
#### ç”Ÿæˆä»£ç ç»“æ„
```python
import requests

url = 'https://api.example.com/login'
headers = {
    'User-Agent': 'Mozilla/5.0',
    'Content-Type': 'application/json'
}

# JSON è¯·æ±‚ç¤ºä¾‹
import json
payload = json.loads(r"""{"username": "admin", "password": "P@ssw0rd"}""")
response = requests.post(url, headers=headers, json=payload)

print('[çŠ¶æ€ç ]:', response.status_code)
print('[å“åº”æ­£æ–‡]:\n', response.text)
```

#### æ”¯æŒçš„æ•°æ®ç±»å‹å¤„ç†

| æ•°æ®ç±»å‹   | å¤„ç†æ–¹å¼              | ç¤ºä¾‹ä»£ç ç‰‡æ®µ                     |
| :--------- | :-------------------- | :------------------------------- |
| URL å‚æ•°   | `params` å­—å…¸è‡ªåŠ¨ç”Ÿæˆ | `params = {'page': '2'}`         |
| è¡¨å•æ•°æ®   | `data` å­—å…¸è‡ªåŠ¨ç”Ÿæˆ   | `data = {'user': 'test'}`        |
| JSON æ•°æ®  | åŸç”Ÿ JSON è§£æ        | `json.loads(r"""{}""")`          |
| äºŒè¿›åˆ¶æ•°æ® | Base64 ç¼–ç ä¼ è¾“       | `data = base64.b64decode('...')` |

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ä¾èµ–ç®¡ç†**

   ç”Ÿæˆçš„è„šæœ¬éœ€è¦å®‰è£… `requests` åº“ï¼š

   ```cmd
   pip install requests
   ```

2. **ç¼–ç å¤„ç†**

   é‡åˆ°ç‰¹æ®Šå­—ç¬¦æ—¶å»ºè®®ä½¿ç”¨åŸå§‹å­—ç¬¦ä¸²

   ```py
   data = r'''raw_content_with_special_chars'''
   ```

3. **HTTPS è¯ä¹¦éªŒè¯**

   å¦‚éœ€è·³è¿‡è¯ä¹¦éªŒè¯ï¼Œå¯åœ¨ä»£ç ä¸­æ·»åŠ ï¼š

   ```py
   response = requests.post(url, verify=False)
   ```

4. **äºŒè¿›åˆ¶æ–‡ä»¶å¤„ç†**

   - è¶…è¿‡ 1MB çš„æ–‡ä»¶å»ºè®®ä½¿ç”¨æ–‡ä»¶æµå¤„ç†

   ```py
   with open('file.zip', 'rb') as f:
       response = requests.post(url, files={'file': f})
   ```

*****

### è¿è¡Œæ•ˆæœ

![image-20250521215903751](./assets/image-20250521215903751.png)

- çœ‹çœ‹ç”Ÿæˆçš„ä»£ç 

![image-20250521215957199](./assets/image-20250521215957199.png)

- è¿è¡Œçœ‹çœ‹

![image-20250521220036213](./assets/image-20250521220036213.png)

*****

### http.py

- è¿™ä¸ªä¸ºé¡¹ç›®çš„åˆå§‹ç‰ˆæœ¬,ç”¨æˆ·å¿«é€Ÿæ¥å£è°ƒè¯•,ä¹Ÿå¯å¿«é€Ÿå°†æ•°æ®åŒ…è½¬åŒ–ä¸ºæ”¯æŒpythonæ ¼å¼çš„æ•°æ®è¯·æ±‚
- `ä¸æ”¯æŒ`å¯¼å…¥burp

![image-20250313134754727](./assets/image-20250313134754727.png)